<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Damor moment</title>
  <style>
    :root{
      --track-height: 10px;
      --thumb-size: 18px;
      --accent: #2b8cff;
      --card: #ffffff;
    }
    body{
      font-family: Inter, system-ui, "Segoe UI", Roboto, Arial;
      background: linear-gradient(180deg,#f0f3f6,#fff);
      padding:40px;
      display:flex;
      align-items:center;
      justify-content:center;
      height:100vh;
      margin:0;
    }
    .card{
      background:var(--card);
      padding:22px 26px;
      border-radius:12px;
      box-shadow:0 6px 24px rgba(20,30,50,0.08);
      width:720px;
      max-width:95%;
    }
    .row{
      display:flex;
      align-items:center;
      gap:16px;
    }
    label{
      min-width:170px;
      color:#333;
      font-weight:600;
    }
    .slider-wrap{
      flex:1;
      display:flex;
      align-items:center;
      gap:12px;
    }
    input[type="range"]{
      -webkit-appearance:none;
      appearance:none;
      width:100%;
      height:var(--track-height);
      background:linear-gradient(90deg,var(--accent) 0%, var(--accent) var(--pct,50%), #e6eefc var(--pct,50%), #e9eef6 100%);
      border-radius:10px;
      outline:none;
      transition: background 0.12s;
      touch-action: none; 
    }
    input[type="range"]::-webkit-slider-thumb{
      -webkit-appearance:none;
      width:var(--thumb-size);
      height:var(--thumb-size);
      border-radius:50%;
      background:#fff;
      border:4px solid var(--accent);
      box-shadow:0 2px 6px rgba(40,50,90,0.12);
      margin-top: calc((var(--track-height) - var(--thumb-size))/2);
      cursor:grab;
    }
    input[type="range"]:active::-webkit-slider-thumb { cursor:grabbing; }
    .phone{
      min-width:200px;
      text-align:left;
      font-size:18px;
      font-weight:700;
      color:#0b2547;
      background:linear-gradient(180deg,#fff,#f6fbff);
      padding:10px 14px;
      border-radius:8px;
      box-shadow:inset 0 -1px 0 rgba(0,0,0,0.02);
    }
  </style>
</head>
<body>
  <div class="card">
    <div class="row">
      <label for="slider">Input your phone number here:</label>
      <div class="slider-wrap">
        <input id="slider" type="range" min="0" max="999999999" step="1" value="500000000" aria-label="phone-slider" />
      </div>
      <div class="phone" id="phoneDisplay">+777000000000</div>
    </div>
  </div>

  <script>
    const slider = document.getElementById('slider');
    const phoneDisplay = document.getElementById('phoneDisplay');
    const countryCode = '+777';

    function updateTrackPercent() {
      const pct = (slider.value - slider.min) / (slider.max - slider.min) * 100;
      slider.style.setProperty('--pct', pct + '%');
    }

    function randomNineDigits() {
      const n = Math.floor(Math.random() * 1e9); // 0 .. 999 999 999
      return String(n).padStart(9, '0');
    }

    function onInputShowRandom() {
      const digits = randomNineDigits();
      phoneDisplay.textContent = countryCode + digits;
      updateTrackPercent();
    }

    function isPointerOnThumb(clientX) {
      const rect = slider.getBoundingClientRect();
      const min = Number(slider.min), max = Number(slider.max);
      const val = Number(slider.value);
      const ratio = (val - min) / (max - min);
      const thumbX = rect.left + ratio * rect.width;
      const thumbRadius = 18; 
      return Math.abs(clientX - thumbX) <= thumbRadius;
    }

    slider.addEventListener('pointerdown', (e) => {
      if (!isPointerOnThumb(e.clientX)) {
        e.preventDefault();
        e.stopPropagation();
        slider.blur();
        return;
      }
    }, {passive: false});

    slider.addEventListener('touchstart', (e) => {
      const t = e.touches[0];
      if (t && !isPointerOnThumb(t.clientX)) {
        e.preventDefault();
        e.stopPropagation();
        slider.blur();
      }
    }, {passive: false});

    slider.addEventListener('input', onInputShowRandom);

    slider.addEventListener('click', (e) => {
      if (!isPointerOnThumb(e.clientX)) {
        e.preventDefault();
        e.stopPropagation();
        slider.blur();
      }
    }, {passive: false});

    window.addEventListener('load', () => {
      const init = randomNineDigits();
      phoneDisplay.textContent = countryCode + init;
      updateTrackPercent();
    });
  </script>
</body>
</html>
